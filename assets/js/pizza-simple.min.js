!function($){const dataComponents=JSON.parse($(".pizza_components_wrapper").attr("data-pizza"));let initialPrice=$(".pizza_components_wrapper").attr("data-price");const inputBase=$("input[name=u-pizza-base]");if(0===$("form.variations_form").length&&$("form.cart").length>0){$(".component-buttons").on("click",".plus, .minus",(function(){calculate()})),$("#remove-component .pizza-components-item").on("click",(function(){calculateComponentsRemove($(this))}));const calculate=()=>{let sum=parseFloat(initialPrice);$("#add-component .pizza-components-item").each((function(){let val=$(this).find(".component-qty").val(),componentId=$(this).find(".component-buttons").attr("data-food-item"),componentObject=Object.values(dataComponents.pizza.extra).find(component=>component.id===componentId);void 0!==componentObject&&(sum+=parseFloat(componentObject.price)*parseInt(val))})),console.log(sum),refreshPriceHtml(sum)},refreshPriceHtml=summ=>{let priceContainer;$(".product").find(".price").html(u_wc_price(summ))},calculateComponentsRemove=el=>{if(!el.find(".u-remove-component").length)return;let componentId=el.attr("data-component-id");const inputBaseValue=JSON.parse(inputBase.val());let modiFiedData=inputBaseValue.map(c=>{let key=Object.keys(c)[0];return c.hasOwnProperty(componentId)?{[key]:!c[componentId]}:c});inputBase.val(JSON.stringify(modiFiedData)),refreshClasses(modiFiedData),calculate()},refreshClasses=data=>{$("#remove-component .pizza-components-item").each((function(){$(this).removeClass("active")})),data.forEach(c=>{let key=Object.keys(c)[0];!c[key]&&$(`[data-component-id=${key}]`).closest(".pizza-components-item").addClass("active")})}}}(jQuery);